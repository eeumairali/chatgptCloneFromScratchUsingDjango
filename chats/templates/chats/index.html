<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
  <style>
    body{margin:0;font-family:sans-serif;display:flex;height:100vh}
    aside{width:260px;border-right:1px solid #ddd;padding:12px;overflow:auto}
    main{flex:1;display:flex;flex-direction:column}
    .msgs{flex:1;overflow:auto;padding:16px}
    .msg{margin:8px 0}
    .assistant{background:#f6f7f8;padding:8px;border-radius:6px}
    form{display:flex;gap:8px;border-top:1px solid #ddd;padding:12px}
    textarea{flex:1;height:80px}
    a{text-decoration:none;color:#222}
    .item{margin-bottom:10px}
  </style>
</head>
<body>

<aside>
  <p><a href="{% url 'chat_new' %}">+ New chat</a></p><hr>
  {% for c in chats %}
    <div class="item">
  <a href="{% url 'chat_open' c.id %}">{{ c.title|default:"Untitled" }}</a><br>
      <small>{{ c.updated_at }}</small>
    </div>
  {% empty %}
    <p>No chats yet.</p>
  {% endfor %}
</aside>

<main>
  <div class="msgs">
    {% for m in messages %}
      <div class="msg">
        {% if m.user == 'assistant' %}
          <div class="assistant"><b>Assistant:</b> {{ m.message }}</div>
        {% else %}
          <div><b>{{ m.user }}:</b> {{ m.message }}</div>
        {% endif %}
      </div>
    {% empty %}
      <p>Say hello to start the conversation.</p>
    {% endfor %}
  </div>

  <form method="post" action="{% url 'chat' %}">
    {% csrf_token %}
    <input type="hidden" name="cid" value="{{ cid }}">
    <textarea name="message" placeholder="Type your message..." required></textarea>
    <button type="submit">Send</button>
  </form>
</main>

</body>
</html>